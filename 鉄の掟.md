# 🔥 まん2000プロジェクト - 鉄の掟

## 🚨 作業開始前に必ず確認（作業より大事）

**この掟を毎回参照すること。これはプロジェクト存続の絶対条件です。**

### ⚡ 最重要規定

**著作物からは著作権法その他法令や規約に反しないよう、アイデアを抽出するものとする**

#### この規定の意味
- ❌ **表現のコピー・模倣は絶対禁止**
- ❌ **文章の言い換えも禁止**
- ❌ **構成の類似も禁止**
- ✅ **アイデア・概念のみを抽出**
- ✅ **完全に独自の言葉で再構成**
- ✅ **独自の視点・構成で作成**

#### 違反した場合
🚨 **プロジェクト全体が法的に破綻し、使用不可能になります**

---

## 📚 プロジェクトの基本方針

### 第1条：本番とテスト段階の区別
- **第1弾（本番）**: 『40歳からの予防医学 _ 医者が教える｢病気にならない知識と習慣74｣ 森 勇磨』
- **それ以前**: テスト段階として扱い、デプロイ対象外
- テスト段階のコンテンツは本番デプロイに含めない

### 第2条：1冊の本から10テーマを基本とする
- **基本**: 1冊のPDFから10テーマを生成
- **例外**: 明示的に指示がある場合のみテーマ数を変更
- 10テーマで1つの書籍を完結させる

### 第3条：著作権遵守とオリジナル著作物の作成
1. **PDFからアイデア・概念のみ抽出**（非著作権対象）
2. **学習・理解**を経て
3. **完全にオリジナルな著作物**を作成
4. 表現は一切模倣せず、独自の言葉で再構成

### 第4条：コンテンツ構成
各テーマは以下で構成：
- **解説文**: 2000文字以上
- **図解**: 6枚（各章ごと）
- **4コマ漫画**: 1枚
- **メタデータ**: metadata.json
- **HTML**: reading.html（読書ページ）、index.html（ギャラリー）

### 第5条：画像生成ツールの指定（絶対遵守）

**🚨 図解も4コマ漫画も、すべてNanobanana PRO（Gemini 3 Pro Image）で生成する**

#### 図解の生成方法
- **ツール**: `mcp__manga-nanobanana__generate_manga_direct`
- **スタイル**: `shounen`（少年漫画風）
- **レイアウト**: `single_panel`（1コマ全画面）
- **説明**: 図解は「漫画の1ページ1コマ」として生成する
- **❌ 絶対禁止**: Leonardo AIなど他のツールで図解を生成すること

#### 4コマ漫画の生成方法
- **ツール**: `mcp__manga-nanobanana__generate_manga_direct`
- **スタイル**: `shounen`（少年漫画風）
- **レイアウト**: `vertical_4panel`（縦長4コマ）
- **説明**: ストーリー仕立ての4コマ漫画

#### なぜこのルールが重要か
- ✅ 統一感のある少年漫画風のビジュアル
- ✅ Nanobanana PROの高品質な画像生成
- ✅ 日本語に対応した自然な表現
- ❌ Leonardo AIはリアル過ぎて気持ち悪い
- ❌ Leonardo AIは日本語がおかしくなる

### 第6条：自律的な実行
- **人間の協力**: GitHubなど1クリックで対応できる操作のみ
- **それ以外**: 完全自律で実行
- 判断が必要な場合は選択肢を提示し、1クリックで選べるようにする

### 第7条：テーマの順次実行原則（絶対遵守）

**🚨 各テーマが終わるまで次のテーマに進んではいけない**
**🚨 ローカル確認とGit commitまで完了して初めて次のテーマに行ける**
**🚨 デプロイはユーザーが指定したタイミングでまとめて実行**

---

#### ❌ 絶対禁止事項（違反＝プロジェクト失敗）

1. **最初に10テーマすべてを決定すること**
   - 1冊あたり10テーマが基本だが、最初に10テーマは決めない
   - テーマは1つずつ決定する

2. **次のテーマを先に決定すること**
   - 現在のテーマのローカル確認完了していないのに次のテーマを考える
   - 「次はこれをやろう」と計画を立てる

3. **複数テーマを同時並行で進めること**
   - テーマAの途中でテーマBを開始する
   - 「まとめてやった方が効率的」は禁止

4. **ブラウザ確認をスキップすること**
   - 図解・漫画・HTMLページを目視確認せずに次へ進む
   - リンクを提示するだけで実際に開かない

5. **既存テーマと重複する内容を作成すること**
   - 1つずつ更新する際、内容の重複が起きないように作成する
   - 既存テーマの確認を怠る

6. **ユーザーの指示なしでGit pushすること**
   - 勝手にデプロイを開始する
   - 「毎回デプロイした方が良い」と判断する

---

#### ✅ 正しい実行フロー（必ず守る）

```
【テーマNを開始する前の必須チェック】
□ テーマN-1はローカル確認とGit commit完了しているか？
□ 既存テーマ（1～N-1）を確認したか？
□ 新しいテーマは既存と重複していないか？

↓ すべて✅の場合のみ進む

【テーマN決定】
- 既存テーマと重複しないテーマを1つだけ決定
- 10テーマすべてを決めない

↓

【テーマN生成】
Step 1: アイデア抽出
Step 2: 解説文生成（2000文字以上）
Step 3: 図解画像生成（6枚）
Step 4: 4コマ漫画生成
Step 5: メタデータ生成
Step 6: HTML生成
Step 7: メタデータ統合（aggregate-metadata.js実行）

↓

【テーマNローカル確認（自動）】
Step 8: 自動的にブラウザで開く
  - 図解6枚すべて（openコマンドで開く）
  - 4コマ漫画（openコマンドで開く）
  - reading.html（file:///パスで開く）
  - index.html（file:///パスで開く）
  ⚠️ ユーザーの確認は待たない（ブラウザに表示が溜まる）
  ⚠️ ユーザーは後でまとめて確認する

↓

【テーマNローカル保存】
Step 9: Git add, commit（pushはしない）

↓

【✅ テーマN完了】
ブラウザ表示とGit commit完了したら即座に次のテーマへ

↓

【テーマN+1を開始】
（最初に戻る）
```

---

#### 🚨 エラー発生時の対応（絶対遵守）

**エラーが発生したら必ず停止してユーザーの指示を仰ぐ**

**停止すべきエラー**:
- ❌ Git commit失敗
- ❌ Git add失敗
- ❌ ファイル保存失敗
- ❌ 画像生成API失敗
- ❌ メタデータ統合スクリプトエラー
- ❌ その他予期しないエラー

**エラー時の行動**:
1. ✅ エラー内容を明確に報告
2. ✅ エラーが発生したステップを特定
3. ✅ ユーザーの指示を待つ
4. ❌ エラーを無視して次に進まない
5. ❌ 勝手に代替手段で進めない
6. ❌ 「後で直せばいい」と判断しない

---

#### 🔍 重複回避チェック（テーマ決定前に必ず実行）

テーマNを決定する前に、以下を確認：

**チェック項目**:
- [ ] 既存のテーマ1～N-1をすべて確認した
- [ ] 新しいテーマは既存テーマと異なるアイデアである
- [ ] 新しいテーマは異なる視点・切り口になっている
- [ ] 新しいテーマは新しい学びを提供できる

**✅ すべてチェック通過**: テーマN決定OK
**❌ 1つでも不合格**: 別のテーマに変更

---

#### 🚨 違反時の影響（プロジェクト崩壊）

**この第6条を守らないと**:
- ❌ 複数テーマを同時に進めてミスが発生
- ❌ テーマ間で内容が重複して価値が低下
- ❌ デプロイ漏れが発生して未完成のまま放置
- ❌ 品質が低下してプロジェクト全体が使い物にならない

**この第6条は「著作権法その他法令や規約の遵守」と同じくらい重要です**

---

## 🎯 現在の第1弾プロジェクト

### 書籍情報
- **タイトル**: 40歳からの予防医学
- **著者**: 森 勇磨
- **テーマ数**: 10テーマ（基本方針に従う）
- **書籍名**: 健康長寿ハック

### 進捗状況
- ✅ テーマ1: 健康診断数値の読み解き実践ガイド
- ✅ テーマ2: 血圧130未満の真実と実践管理術
- 🔄 テーマ3-10: 順次生成中

---

## 🚀 デプロイポリシー

### デプロイタイミング
- **ユーザーが「デプロイして」と指示したときのみ実行**
- テーマ1つごとではなく、まとめて実行（効率化）
- 例：10テーマ完成後、1冊完成後、100テーマ完成後など

### デプロイフロー（ユーザー指示後）
```
Step 1: 溜まっているGit commitを確認
Step 2: Git push（まとめてリモートへ送信）
Step 3: Netlify自動ビルド開始
Step 4: ビルド完了を待機（2-5分）
Step 5: デプロイ完了確認
  - トップページで総テーマ数・書籍数を確認
  - 新しいテーマページが正常に表示されるか確認
```

### 各テーマ完了時の処理
```
テーマ生成完了 → ローカル確認 → Git commit（pushしない）
```
- pushはユーザーが指示するまで保留
- 複数テーマ分のcommitを溜めておく
- ユーザーの「デプロイして」でまとめてpush

---

## 📁 ディレクトリ構造

```
learning-content/
├── 鉄の掟.md                    # このファイル
├── index.html                   # トップページ
├── site-config.json             # サイト設定
├── deploy.sh                    # 自動デプロイスクリプト
├── scripts/
│   └── aggregate-metadata.js   # メタデータ統合
├── data/
│   └── all-content.json        # 全コンテンツメタデータ
└── 健康長寿ハック/
    ├── テーマ1/
    ├── テーマ2/
    └── ... (テーマ10まで)
```

---

## ⚠️ 重要事項

1. **テスト段階のコンテンツは本番に含めない**
2. **1冊＝10テーマが基本**
3. **著作権遵守：アイデアのみ抽出、表現は完全オリジナル**
4. **自律実行：人間は1クリック操作のみ**
5. **順次実行：1テーマ完全完了（ローカル確認とGit commitまで）してから次へ**
6. **デプロイはユーザー指示のみ：勝手にGit pushしない**
7. **ブラウザ確認必須：図解・漫画・HTMLページを毎回開いて確認**
8. **エラー発生時は停止：ユーザーの指示を仰ぐ**

---

*この掟は、まん2000プロジェクトの品質と一貫性を保つための絶対ルールです。*
